<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>The EpicBook!</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Nunito:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link href="/assets/css/style.css" rel="stylesheet" />

    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-auth.js"></script>
    <script src="https://kit.fontawesome.com/340330cae2.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </head>

  <body class="epic-body">
    <header class="site-header">
      <div class="announcement" role="status">
        <span class="announcement__badge">New</span>
        Summer quests, badges, and reading buddies just landed. Start a free trial and unlock the shelves!
      </div>
      <div class="nav-bar">
        <a id="logo-container" href="/" class="brand">The EpicBook!</a>
        <button class="nav-toggle" type="button" aria-expanded="false" aria-controls="primary-navigation" data-nav-toggle>
          <span class="nav-toggle__bar"></span>
          <span class="sr-only">Toggle navigation</span>
        </button>
        <nav id="primary-navigation" class="nav-links" data-nav-menu>
          <a href="#plans" class="nav-link">Plans</a>
          <a href="#family-signup" class="nav-link">Families</a>
          <a href="#shelves" class="nav-link">Curated Shelves</a>
          <a href="/gallery" class="nav-link">Gallery</a>
        </nav>
        <div class="nav-actions">
          <a href="/cart" class="nav-pill" aria-label="Open saved books">
            <span class="nav-pill__icon fa fa-star"></span>
            <span class="nav-pill__label">My Shelf</span>
            <span class="nav-pill__badge">{{cartCount}}</span>
          </a>
          <a href="/account" id="account-link" class="nav-pill nav-pill--ghost" style="display:none;">
            <span class="fa fa-user"></span>
            <span class="nav-pill__label">Account</span>
          </a>
          <a href="#" id="logout-link" class="nav-pill nav-pill--ghost" style="display:none;">
            <span class="fa fa-sign-out-alt"></span>
            <span class="nav-pill__label">Log out</span>
          </a>
          <a href="#" id="login-link" class="nav-pill nav-pill--primary">
            <span class="fa fa-magic"></span>
            <span class="nav-pill__label">Sign in</span>
          </a>
        </div>
      </div>

      <section class="hero" id="hero" data-scroll-animate>
        <div class="hero__content">
          <h1 class="hero__title">Spark wonder with epic stories for every young reader.</h1>
          <p class="hero__subtitle">
            Crafted shelves, guided quests, and collectible badges turn reading practice into an adventure. Choose the
            perfect plan and watch your reader level up.
          </p>
          <div class="hero__cta">
            <a href="#plans" class="btn btn--primary">Start free 30-day trial</a>
            <a href="#family-signup" class="btn btn--secondary">See family plans</a>
          </div>
          <ul class="hero__highlights">
            <li><span class="fa fa-check-circle"></span> Personalized shelves refreshed weekly</li>
            <li><span class="fa fa-check-circle"></span> Progress badges and reading level tracks</li>
            <li><span class="fa fa-check-circle"></span> Up to 4 child profiles with one membership</li>
          </ul>
        </div>
        <div class="hero__illustrations" aria-hidden="true">
          <div class="mascot mascot--explorer"></div>
          <div class="mascot mascot--scientist"></div>
          <div class="floating-card floating-card--one">
            <span class="floating-card__title">Quest of the Week</span>
            <span class="floating-card__meta">Finish 3 comics to earn the Lightning badge</span>
          </div>
          <div class="floating-card floating-card--two">
            <span class="floating-card__title">Family Streak</span>
            <span class="floating-card__meta">17 days of shared storytime!</span>
          </div>
        </div>
      </section>
      <section class="shelf-promo" id="shelves" data-scroll-animate>
        <h2 class="section-title">Curated shelves to ignite curiosity</h2>
        <div class="shelf-promo__list">
          {{#each categories}}
            <article class="shelf-card">
              <span class="shelf-card__icon fa fa-book"></span>
              <h3 class="shelf-card__title">{{DISTINCT}}</h3>
              <p class="shelf-card__meta">Handpicked adventures &amp; challenges for this theme.</p>
            </article>
          {{/each}}
        </div>
      </section>
    </header>

    <main class="page-content">
      {{{body}}}
    </main>

    <footer class="site-footer">
      <div class="site-footer__inner">
        <div class="footer-brand">
          <span class="footer-brand__logo">The EpicBook!</span>
          <p class="footer-brand__tagline">Helping families fall in love with reading, one quest at a time.</p>
          <div class="trust-badges">
            <span class="trust-badge trust-badge--shield">KidSafe</span>
            <span class="trust-badge trust-badge--heart">Parent Approved</span>
            <span class="trust-badge trust-badge--star">Educator Loved</span>
          </div>
        </div>
        <div class="footer-links">
          <div>
            <h4>Explore</h4>
            <ul>
              <li><a href="#plans">Plans &amp; pricing</a></li>
              <li><a href="#family-signup">Family signup</a></li>
              <li><a href="/gallery">Illustration gallery</a></li>
            </ul>
          </div>
          <div>
            <h4>Support</h4>
            <ul>
              <li><a href="mailto:hello@thecloudadvisory.com">Email support</a></li>
              <li><a href="#">Safety center</a></li>
              <li><a href="#">Accessibility</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="site-footer__meta">
        <p>Â© 2024 The CloudAdvisory. All rights reserved.</p>
        <p>Made with imagination for families everywhere.</p>
      </div>
    </footer>

    <div id="auth-modal" class="auth-modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="auth-modal__backdrop" data-auth-close></div>
      <div class="auth-modal__dialog" role="document">
        <button class="auth-modal__close" type="button" data-auth-close aria-label="Close sign in dialog">
          <span class="fa fa-times"></span>
        </button>
        <h4 class="auth-modal__title">Manage your account</h4>
        <form id="login-form" class="auth-form">
          <div class="input-field">
            <label for="login-email">Email</label>
            <input id="login-email" type="email" required />
          </div>
          <div class="input-field">
            <label for="login-password">Password</label>
            <input id="login-password" type="password" required />
          </div>
          <button class="btn btn--primary" type="submit">Sign in</button>
          <p id="login-error" class="form-error"></p>
          <p class="switch-auth">Need an account? <a href="#" id="show-signup">Sign up</a></p>
        </form>
        <form id="signup-form" class="auth-form hide">
          <div class="input-field">
            <label for="signup-display-name">Guardian name</label>
            <input id="signup-display-name" type="text" />
          </div>
          <div class="input-field">
            <label for="signup-email">Email</label>
            <input id="signup-email" type="email" required />
          </div>
          <div class="input-field">
            <label for="signup-password">Password</label>
            <input id="signup-password" type="password" required />
          </div>
          <div class="input-field">
            <label for="signup-confirm-password">Confirm password</label>
            <input id="signup-confirm-password" type="password" required />
          </div>
          <button class="btn btn--primary" type="submit">Create account</button>
          <p id="signup-error" class="form-error"></p>
          <p class="switch-auth">Already have an account? <a href="#" id="show-login">Sign in</a></p>
        </form>
      </div>
    </div>

    <script>
      window.__FIREBASE_CONFIG__ = {{{json firebaseConfig}}};
      window.__SERVER_CURRENT_USER__ = {{{json currentUser}}};
      window.__SERVER_KNOWS_USER__ = {{#if serverKnowsUser}}true{{else}}false{{/if}};
      window.__CURRENT_USER__ = window.__SERVER_CURRENT_USER__;
    </script>
    <script src="/assets/js/auth.js" type="text/javascript"></script>
    <script src="/assets/js/book.js" type="text/javascript"></script>
    <script>
      (function () {
        const navToggle = document.querySelector("[data-nav-toggle]");
        const navMenu = document.querySelector("[data-nav-menu]");
        const authModal = document.getElementById("auth-modal");

        function setNavState(expanded) {
          if (!navToggle || !navMenu) {
            return;
          }
          navToggle.setAttribute("aria-expanded", expanded ? "true" : "false");
          navMenu.classList.toggle("is-open", Boolean(expanded));
        }

        if (navToggle && navMenu) {
          navToggle.addEventListener("click", () => {
            const willExpand = navToggle.getAttribute("aria-expanded") !== "true";
            setNavState(willExpand);
          });
          navMenu.querySelectorAll("a").forEach((link) => {
            link.addEventListener("click", () => setNavState(false));
          });
        }

        document.querySelectorAll("[data-auth-close]").forEach((node) => {
          node.addEventListener("click", () => {
            if (authModal) {
              authModal.style.display = "none";
              authModal.setAttribute("aria-hidden", "true");
            }
          });
        });

        const scrollElements = document.querySelectorAll("[data-scroll-animate]");
        if (window.IntersectionObserver) {
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  entry.target.classList.add("is-visible");
                  observer.unobserve(entry.target);
                }
              });
            },
            { threshold: 0.2 }
          );
          scrollElements.forEach((element) => observer.observe(element));
        } else {
          scrollElements.forEach((element) => element.classList.add("is-visible"));
        }

        document.querySelectorAll("[data-carousel]").forEach((carousel) => {
          const track = carousel.querySelector("[data-carousel-track]");
          const prev = carousel.querySelector("[data-carousel-prev]");
          const next = carousel.querySelector("[data-carousel-next]");

          function getScrollAmount() {
            const card = carousel.querySelector(".story-card");
            if (!card) {
              return 320;
            }
            const style = window.getComputedStyle(card);
            const marginRight = parseFloat(style.marginRight) || 0;
            return card.offsetWidth + marginRight;
          }

          if (prev) {
            prev.addEventListener("click", () => {
              if (track) {
                track.scrollBy({ left: -getScrollAmount(), behavior: "smooth" });
              }
            });
          }

          if (next) {
            next.addEventListener("click", () => {
              if (track) {
                track.scrollBy({ left: getScrollAmount(), behavior: "smooth" });
              }
            });
          }
        });
      })();
    </script>
  </body>
</html>
